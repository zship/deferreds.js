<div class="overview section"><h3 rel="module:deferreds/Deferred#SOverview" class="section-header">Overview</h3><div class="subsection"><div class="meta"><a href="#/deferreds/Deferred#SOverview" alt="Permalink to deferreds/Deferred overview" title="Permalink to deferreds/Deferred overview" class="permalink"><i class="icomoon-hash"></i></a></div><div class="description"><p>A <a href="#/module:deferreds/Deferred" title="module:deferreds/Deferred">Deferred</a> object wraps a <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a> object and provides ways to change its
state from &quot;pending&quot; to &quot;fulfilled&quot; or &quot;rejected&quot;. It is used to convert
callback or continuation-passing style (common in Node.js&#39; asynchronous
functions) to a monadic <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a> form. Which is a fancy way of saying &quot;make
this contrived example&hellip;</p>
<pre><code class="lang-js"><span class="comment">//Continuation-passing style</span>
fs.readFile(<span class="string">"config.json"</span>, <span class="keyword">function</span>(err, data) {
    <span class="keyword">if</span> (err) {
        console.error(err);
    }
    <span class="keyword">var</span> mainConfig = JSON.parse(data).mainConfig;
    fs.exists(mainConfig, <span class="keyword">function</span>(exists) {
        <span class="keyword">if</span> (!exists) {
            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Missing mainConfig file: '</span> + depFile);
        }
        loadConfig(mainConfig, <span class="keyword">function</span>(err, mainConfigData) {
            <span class="comment">//...</span>
        });
    });
});</code></pre>
<p>&hellip;look like this&hellip;</p>
<pre><code class="lang-js"><span class="comment">//Promise style</span>
promisifiedFs.readFile(<span class="string">"config.json"</span>)
    .then(<span class="keyword">function</span>(data) {
        <span class="keyword">return</span> promisifiedFs.exists(JSON.parse(data).mainConfig);
    })
    .then(<span class="keyword">function</span>(exists) {
        <span class="keyword">if</span> (!exists) {
            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Missing mainConfig file: '</span> + depFile);
        }
        <span class="keyword">return</span> loadConfig(mainConfig);
    })
    .then(<span class="keyword">function</span>(mainConfigData) {
        <span class="comment">//...</span>
    })
    .then(<span class="literal">null</span>, <span class="keyword">function</span>(err) {
        console.error(err);
    });</code></pre>
<p>&hellip;defined something like this:&quot;</p>
<pre><code class="lang-js"><span class="comment">//use Deferred to convert a continuation-passing-style function into a</span>
<span class="comment">//Promise-style function</span>
<span class="keyword">var</span> promisifiedFs = {
    readFile: <span class="keyword">function</span>(file) {
        <span class="keyword">var</span> deferred = <span class="keyword">new</span> Deferred();
        fs.readFile(file, <span class="keyword">function</span>(err, data) {
            <span class="keyword">if</span> (err) {
                deferred.reject(err);
            }
            <span class="keyword">else</span> {
                deferred.resolve(data);
            }
        });
        <span class="keyword">return</span> deferred.promise();
    },
    exists: <span class="keyword">function</span>(file) {
        <span class="keyword">var</span> deferred = <span class="keyword">new</span> Deferred();
        fs.exists(file, <span class="keyword">function</span>(exists) {
            deferred.resolve(exists);
        });
        <span class="keyword">return</span> deferred.promise();
    }
};</code></pre>
<p>See <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a> for the main discussion on this style.</p>
</div></div></div><div class="dependencies section"><h3 rel="module:deferreds/Deferred#SDependencies" class="section-header">Dependencies</h3><div class="subsection"><div class="meta"><a href="#/deferreds/Deferred#SDependencies" alt="Permalink to deferreds/Deferred dependencies" title="Permalink to deferreds/Deferred dependencies " class="permalink"><i class="icomoon-hash"></i></a></div><div class="requires"><h3>Requires</h3><ul><li><a href="#/deferreds/Promise">deferreds/Promise</a></li></ul></div><div class="requiredby"><h3>Required by</h3><ul><li><a href="#/deferreds/Queue">deferreds/Queue</a></li><li><a href="#/deferreds/forEach">deferreds/forEach</a></li><li><a href="#/deferreds/forEachSeries">deferreds/forEachSeries</a></li><li><a href="#/deferreds/pipe">deferreds/pipe</a></li><li><a href="#/deferreds/whilst">deferreds/whilst</a></li></ul></div></div></div><div class="constructors section"><h3 rel="module:deferreds/Deferred#SConstructor" class="section-header">Constructor</h3><div class="constructor subsection"><h2 class="subsection-header"><span class="returns"><a href="#/module:deferreds/Deferred" title="module:deferreds/Deferred" class="type first">Deferred</a>&nbsp;</span><span class="name">Deferred</span><span class="paren left">&#40;</span><span class="paren right">&#41;</span></h2><div class="meta"><a href="#/deferreds/Deferred#SConstructor" alt="Permalink to undefined" title="Permalink to undefined" class="permalink"><i class="icomoon-hash"></i></a><a alt="View Source" title="View Source" href="https://github.com/zship/deferreds.js/blob/master/src/Deferred.js#L12" class="srclink"><i class="icomoon-code"></i></a></div></div></div><div class="methods section"><h3 rel="module:deferreds/Deferred#SMethods" class="section-header">Methods</h3><div rel="module:deferreds/Deferred#always" class="method subsection"><h2 class="subsection-header"><span class="qualifier">this&nbsp;</span><span class="returns"><a href="#/module:deferreds/Deferred" title="module:deferreds/Deferred" class="type first">Deferred</a>&nbsp;</span><span class="name">always</span><span class="paren left">&#40;</span><span class="params"><span class="param first"><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function" title="" class="type first">Function</a>&nbsp;<span class="name">callback</span></span></span><span class="paren right">&#41;</span></h2><div class="meta"><a href="#/module:deferreds/Deferred#always" alt="Permalink to module:deferreds/Deferred#always" title="Permalink to module:deferreds/Deferred#always" class="permalink"><i class="icomoon-hash"></i></a><a alt="View Source" title="View Source" href="https://github.com/zship/deferreds.js/blob/master/src/Deferred.js#L65" class="srclink"><i class="icomoon-code"></i></a></div><div class="description"><p>Delegates to the wrapped <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a> object&#39;s <a href="#/module:deferreds/Promise#always" title="module:deferreds/Promise#always">Promise#always</a>.</p>
</div></div><div rel="module:deferreds/Deferred#done" class="method subsection"><h2 class="subsection-header"><span class="qualifier">this&nbsp;</span><span class="returns"><a href="#/module:deferreds/Deferred" title="module:deferreds/Deferred" class="type first">Deferred</a>&nbsp;</span><span class="name">done</span><span class="paren left">&#40;</span><span class="params"><span class="param first"><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function" title="" class="type first">Function</a>&nbsp;<span class="name">callback</span></span></span><span class="paren right">&#41;</span></h2><div class="meta"><a href="#/module:deferreds/Deferred#done" alt="Permalink to module:deferreds/Deferred#done" title="Permalink to module:deferreds/Deferred#done" class="permalink"><i class="icomoon-hash"></i></a><a alt="View Source" title="View Source" href="https://github.com/zship/deferreds.js/blob/master/src/Deferred.js#L61" class="srclink"><i class="icomoon-code"></i></a></div><div class="description"><p>Delegates to the wrapped <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a> object&#39;s <a href="#/module:deferreds/Promise#done" title="module:deferreds/Promise#done">Promise#done</a>.</p>
</div></div><div rel="module:deferreds/Deferred#fail" class="method subsection"><h2 class="subsection-header"><span class="qualifier">this&nbsp;</span><span class="returns"><a href="#/module:deferreds/Deferred" title="module:deferreds/Deferred" class="type first">Deferred</a>&nbsp;</span><span class="name">fail</span><span class="paren left">&#40;</span><span class="params"><span class="param first"><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function" title="" class="type first">Function</a>&nbsp;<span class="name">callback</span></span></span><span class="paren right">&#41;</span></h2><div class="meta"><a href="#/module:deferreds/Deferred#fail" alt="Permalink to module:deferreds/Deferred#fail" title="Permalink to module:deferreds/Deferred#fail" class="permalink"><i class="icomoon-hash"></i></a><a alt="View Source" title="View Source" href="https://github.com/zship/deferreds.js/blob/master/src/Deferred.js#L63" class="srclink"><i class="icomoon-code"></i></a></div><div class="description"><p>Delegates to the wrapped <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a> object&#39;s <a href="#/module:deferreds/Promise#fail" title="module:deferreds/Promise#fail">Promise#fail</a>.</p>
</div></div><div rel="module:deferreds/Deferred#promise" class="method subsection"><h2 class="subsection-header"><span class="returns"><a href="#/module:deferreds/Promise" title="module:deferreds/Promise" class="type first">Promise</a>&nbsp;</span><span class="name">promise</span><span class="paren left">&#40;</span><span class="paren right">&#41;</span></h2><div class="meta"><a href="#/module:deferreds/Deferred#promise" alt="Permalink to module:deferreds/Deferred#promise" title="Permalink to module:deferreds/Deferred#promise" class="permalink"><i class="icomoon-hash"></i></a><a alt="View Source" title="View Source" href="https://github.com/zship/deferreds.js/blob/master/src/Deferred.js#L31" class="srclink"><i class="icomoon-code"></i></a></div><div class="description"><p>Return the wrapped <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a> object. You will normally want return this
<a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a> object instead of the <a href="#/module:deferreds/Deferred" title="module:deferreds/Deferred">Deferred</a> in order to guarantee that
downstream code cannot alter the <a href="#/module:deferreds/Deferred" title="module:deferreds/Deferred">Deferred</a>&#39;s state.</p>
</div></div><div rel="module:deferreds/Deferred#reject" class="method subsection"><h2 class="subsection-header"><span class="qualifier">this&nbsp;</span><span class="returns"><a href="#/module:deferreds/Deferred" title="module:deferreds/Deferred" class="type first">Deferred</a>&nbsp;</span><span class="name">reject</span><span class="paren left">&#40;</span><span class="params"><span class="param first"><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects" title="" class="type first">Any</a>&nbsp;<span class="name">args</span><span class="varargs">, ...</span></span></span><span class="paren right">&#41;</span></h2><div class="meta"><a href="#/module:deferreds/Deferred#reject" alt="Permalink to module:deferreds/Deferred#reject" title="Permalink to module:deferreds/Deferred#reject" class="permalink"><i class="icomoon-hash"></i></a><a alt="View Source" title="View Source" href="https://github.com/zship/deferreds.js/blob/master/src/Deferred.js#L50" class="srclink"><i class="icomoon-code"></i></a></div><div class="description"><p>Mark the wrapped <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a>&#39;s <a href="#/module:deferreds/Promise.State" title="module:deferreds/Promise.State">Promise.State</a> as &quot;rejected&quot; and call any
<code>onRejected</code> callbacks.</p>
</div></div><div rel="module:deferreds/Deferred#resolve" class="method subsection"><h2 class="subsection-header"><span class="qualifier">this&nbsp;</span><span class="returns"><a href="#/module:deferreds/Deferred" title="module:deferreds/Deferred" class="type first">Deferred</a>&nbsp;</span><span class="name">resolve</span><span class="paren left">&#40;</span><span class="params"><span class="param first"><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects" title="" class="type first">Any</a>&nbsp;<span class="name">args</span><span class="varargs">, ...</span></span></span><span class="paren right">&#41;</span></h2><div class="meta"><a href="#/module:deferreds/Deferred#resolve" alt="Permalink to module:deferreds/Deferred#resolve" title="Permalink to module:deferreds/Deferred#resolve" class="permalink"><i class="icomoon-hash"></i></a><a alt="View Source" title="View Source" href="https://github.com/zship/deferreds.js/blob/master/src/Deferred.js#L40" class="srclink"><i class="icomoon-code"></i></a></div><div class="description"><p>Mark the wrapped <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a>&#39;s <a href="#/module:deferreds/Promise.State" title="module:deferreds/Promise.State">Promise.State</a> as &quot;fulfilled&quot; and call any
<code>onFulfilled</code> callbacks.</p>
</div></div><div rel="module:deferreds/Deferred#then" class="method subsection"><h2 class="subsection-header"><span class="returns"><a href="#/module:deferreds/Promise" title="module:deferreds/Promise" class="type first">Promise</a>&nbsp;</span><span class="name">then</span><span class="paren left">&#40;</span><span class="params"><span class="param first"><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function" title="" class="type first">Function</a>&nbsp;<span class="name">doneCallback</span></span><span class="param optional"><span class="opt left">[</span><span class="sep">,</span><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function" title="" class="type first">Function</a>&nbsp;<span class="name">failCallback</span><span class="opt right">]</span></span></span><span class="paren right">&#41;</span></h2><div class="meta"><a href="#/module:deferreds/Deferred#then" alt="Permalink to module:deferreds/Deferred#then" title="Permalink to module:deferreds/Deferred#then" class="permalink"><i class="icomoon-hash"></i></a><a alt="View Source" title="View Source" href="https://github.com/zship/deferreds.js/blob/master/src/Deferred.js#L59" class="srclink"><i class="icomoon-code"></i></a></div><div class="description"><p>Delegates to the wrapped <a href="#/module:deferreds/Promise" title="module:deferreds/Promise">Promise</a> object&#39;s <a href="#/module:deferreds/Promise#then" title="module:deferreds/Promise#then">Promise#then</a>.</p>
</div></div></div>